!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){var a=Date.now(),b={time:(a-this.played)*this.v};this.func(b),this.id=window.requestAnimationFrame(c.bind(this))}a("./rAF.js");var d=function(a){this.func=a,this.on=!1,this.paused=this.played=Date.now(),this.v=1,this.active=!1};d.prototype={play:function(){this.func&&!this.on&&(this.played+=Date.now()-this.paused,c.call(this),this.active=this.on=!0)},pause:function(){this.func&&this.on&&(cancelAnimationFrame(this.id),this.active=this.on=!1,this.paused=Date.now())},stop:function(){this.func&&(this.pause(),this.paused=this.played=Date.now())},seek:function(a){if(this.func){var b=Date.now();this.played=b-a,this.paused=b}},speed:function(a){if(this.func&&isFinite(a))if(a){a/=this.v;var b=Date.now(),c=(b-this.played)/a,d=(b-this.paused)/a;this.played=b-c,this.paused=b-d,this.v*=a,this.active&&this.play()}else this.pause(),this.active=!0},remove:function(){this.func&&(this.pause(),delete this.func)}},b.exports=d},{"./rAF.js":2}],2:[function(){!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}()},{}],3:[function(a,b){function c(){this.shapes=[],this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.ctx=this.canvas.getContext("2d")}var d=c.prototype;d.add=function(a){this.shapes.push(a),a.layer=this},d.draw=function(){this.clear(),this.shapes.forEach(function(a){a.draw()})};var e=window.navigator.userAgent,f=/android/i.test(e)&&e.indexOf("534.30");f?(console.log("native_android_browser"),d.clear=function(){this.ctx.clearRect(0,0,this.width,this.height),this.canvas.style.display="none",this.canvas.offsetHeight,this.canvas.style.display="inherit"}):d.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},d.remove=function(){this.clear(),this.shapes.forEach(function(a){delete a.layer}),this.shapes=[]},b.exports=c},{}],4:[function(a,b){function c(a){this.shape=a}c.prototype.draw=function(){var a=this.shape,b=this.layer;b.ctx.beginPath(),b.ctx.arc(a.x,a.y,a.radius,0,2*Math.PI),b.ctx.closePath(),a.fill&&(b.ctx.fillStyle=a.fill,b.ctx.fill())},c.prototype.setX=function(a){this.shape.x=a},c.prototype.setY=function(a){this.shape.y=a},b.exports=c},{}],5:[function(a,b){function c(a){this.layers=[];var b=this.container=document.getElementById(a.container);b.style.position="relative",b.width=a.width,b.height=a.height,this.width=parseInt(a.width),this.height=parseInt(a.height)}c.prototype.add=function(a){var b=a.canvas;this.layers.push(a),b.width=a.width=this.width,b.height=a.height=this.height,this.container.appendChild(b)},b.exports=c},{}],6:[function(a,b){function c(){"use strict";var a,b,e,f,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});l>k;++k)if(a=arguments[k],null!=a)for(b in a)e=j[b],f=a[b],j!==f&&(m&&f&&(g(f)||(h=Array.isArray(f)))?(h?(h=!1,i=e&&Array.isArray(e)?e:[]):i=e&&g(e)?e:{},j[b]=c(m,i,f)):f!==d&&(j[b]=f));return j}var d,e=Object.prototype.hasOwnProperty,f=Object.prototype.toString,g=function(a){"use strict";if(!a||"[object Object]"!==f.call(a))return!1;var b=e.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&e.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var g;for(g in a);return g===d||e.call(a,g)};b.exports=c},{}],7:[function(a,b){function c(a,b){var c,d=b.time,e=b.position,f=d.now;if(f<d.thrown){c=e.middle.x-e.start.x,a.setX(e.start.x+c*f/d.thrown);var g=.5*b.gravity*d.thrown;a.setY(e.start.y-g*f+.5*b.gravity*f*f)}else c=e.end.x-e.middle.x,a.setX(e.middle.x+c*(f-d.thrown)/d.caught),a.setY(e.middle.y)}var d=a("./Animation/Animation.js"),e=a("./Canvas/Shape/Circle.js"),f=a("./extend.js"),g=a("./Canvas/Layer.js"),h=a("./Canvas/Stage.js"),i=function(){function a(a,b){var c,d=a.juggling,e=a.stage,f=(b-d.waiting.time)*d.interval;if(e.width){var g=(d.integer_height-d.waiting.time)*d.interval,h=g/f;c=h*e.width,console.log("uu",h)}else{var g=(3-d.waiting.time)*d.interval,h=g/f;c=1.5*d.height*h}return{width:.5*c,gravity:8*d.height/(f*f),shift:d.waiting.shift*h,radius:d.balls.radius*h}}function b(b){console.log(b.stage),this.attrs={},this.attrs=f(!0,this.attrs,{stage:{width:500,height:650},juggling:{interval:500,waiting:{time:.5,shift:50},integer_height:5,balls:{radius:10,colors:["red","blue","green","yellow","black","orange","purple"]},height:.8*b.stage.height,center:{x:.5*b.stage.width,y:.9*b.stage.height}},layer:new g},b),this.attrs.stage=new h(this.attrs.stage),this.attrs.stage.add(this.attrs.layer);var c=this.attrs.juggling,d=a(this.attrs,this.attrs.juggling.integer_height);c.width=d.width,c.gravity=d.gravity}for(var i="abcdefghijklmnopqrstuvwxyz",j={},k=0;10>k;++k)j[k]=k;for(var k=0;k<i.length;++k)j[i[k]]=k+10;return b.toPattern=function(a){return a.split("").map(function(a){return j[a]})},b.prototype.setPattern=function(f){"string"==typeof f&&(f=b.toPattern(f));var g,h,i,j,k=this.attrs,l=(k.stage,k.juggling),m=Math.max.apply(null,f);if(m>l.integer_height){var n=a(k,m);j=n.width,i=n.gravity,h=n.shift,g=n.radius}else h=l.waiting.shift,j=l.width,i=l.gravity,g=l.balls.radius;var o=f.reduce(function(a,b){return a+b},0);if(o%f.length!=0)throw new Error("El patr√≥ es irrealitzable. Es necessita un nombre enter de boles. Actualment: "+o/f.length);o/=f.length;for(var p=[],q=0;q<f.length;++q){var r={};r.value=f[q],r.next=(q+r.value)%f.length,r.period=(r.value-l.waiting.time)*l.interval,r.velocity=.5*i*r.period,p.push(r)}for(var q=0;q<f.length;++q)if(!p[q].cycle){for(var s={},t=q,u=0;!s[t];)s[t]=!0,t=p[t].next,u+=p[t].value;for(var t in s)p[t].cycle=u}var v=l.center.y;h/=2;var w=l.center.x-j/2,x=l.center.x+j/2,y=0,z=0,q=0,A=0,B={};for(this.balls=[];o>q;){if(0!==p[z].value)if(void 0===B[y]){B[y]=q,B[y+p[z].value]=q,++q;var C={figure:new e({x:y%2===0?w+15:x-15,y:v,radius:g||10,fill:l.balls.colors[A%l.balls.colors.length]}),start:y,cycle:p[z].cycle};this.balls.push(C),k.layer.add(C.figure),++A}else B[y+p[z].value]=p[z].value;++y,z=y%p.length}var D=this;k.animation=new d(function(a){var b=Math.floor(a.time/l.interval);D.balls.forEach(function(d){var e=a.time-l.interval*d.start;if(e>=0){e%=d.cycle*l.interval;for(var f,g=d.start%p.length;;){f=p[g].value;var j=f*l.interval;if(j>e)break;e-=j,g=p[g].next}var k=b-Math.floor(e/l.interval),m={};m.start=k%2===0?{x:w+h,y:v}:{x:x-h,y:v},(k+p[g].value)%2===0?(m.middle={x:w-h,y:v},m.end={x:w+h,y:v}):(m.middle={x:x+h,y:v},m.end={x:x-h,y:v});var n={value:p[g].value,time:{total:l.interval,thrown:p[g].period,caught:l.interval*p[g].value-p[g].period,now:e},left:k%2===0,gravity:i,position:m};c(d.figure,n)}}),k.layer.draw()})},b.prototype.removePattern=function(){var a=this;a.attrs.animation.stop(),a.attrs.layer.remove()},b.prototype.play=function(){this.attrs.animation.play()},b.prototype.pause=function(){this.attrs.animation.pause()},b.prototype.stop=function(){this.attrs.animation.stop(),this.attrs.layer.remove()},b.prototype.speed=function(a){this.attrs.animation.speed(a)},b}();b.exports=i},{"./Animation/Animation.js":1,"./Canvas/Layer.js":3,"./Canvas/Shape/Circle.js":4,"./Canvas/Stage.js":5,"./extend.js":6}],8:[function(a){var b=a("./juggler.js"),c=(a("./Canvas/Stage.js"),a("./extend.js")),d=document.getElementById("pattern"),e=document.getElementById("select"),f={play:document.getElementById("play"),stop:document.getElementById("stop"),speed:document.getElementById("speed")},g=new b({stage:{container:"container",width:500,height:650}});g.setPattern("531"),console.log("eoo",c(!0,{},g.balls[0].figure.shape)),g.play(),e.onchange=function(){d.value=e.value,h=!0,f.play.value="play",i=!0};var h=!1,i=!1;d.oninput=function(){h=!0,f.play.value="play",i=!0},f.play.onclick=function(){if(h){var a=d.value;g.removePattern(),g.setPattern(a)}i?(g.play(),this.value="pause"):(g.pause(),this.value="play"),i=!i,h=!1},f.stop.onclick=function(){g.stop(),f.play.value="play",i=!0,h=!0},f.speed.oninput=function(){var a=parseFloat(this.value);g.speed(a)}},{"./Canvas/Stage.js":5,"./extend.js":6,"./juggler.js":7}]},{},[8]);